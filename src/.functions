#!/bin/bash

function command_not_found_handle {
	echo 'Command "'"${1}"'" not found';
	return 127;
}

function set_shell_title {
	case "${TERM}" in
		xterm|cygwin) echo -ne "\e]2;${*}\a";;
	esac;
}

function short_pwd {
	# take $PWD
	# if it starts with $HOME, replace it with ~
	# remove trailing slash
	echo "${PWD}/" | sed "s@^${HOME}/@~/@" | sed "s/\/\$//";
}

# from mathiasbynens/dotfiles .functions
function dataurl {
	local mimeType;
	mimeType=$(file -b --mime-type "${1}");
	if [[ "${mimeType}" == text/* ]]; then
		mimeType="${mimeType};charset=utf-8";
	fi
	echo "data:${mimeType};base64,$(openssl base64 -in "${1}" | tr -d '\n')";
}
